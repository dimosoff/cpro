(()=>{var w=new H,$=new B,x=new Z;function F(o,r,s){document.querySelector(o).addEventListener("click",()=>{document.querySelectorAll(r).forEach(d=>{d.classList.toggle(s)})})}function T(o,r,s){window.addEventListener("scroll",function(){scrollY>r?document.querySelector(o).classList.add(s):document.querySelector(o).classList.remove(s)}),scrollY>r&&document.querySelector(o).classList.add(s)}function Z(){document.querySelectorAll("a[href^='#']").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();let d=s.target.getAttribute("href")||s.target.parentElement.getAttribute("href")||s.target.firstElementChild.getAttribute("href");if(d==="#")return;let c=document.getElementById(d.substring(1));if(!c)return;let u=window.scrollY,l=c.offsetTop-50,y=document.querySelector("._menu-opened");y&&y.classList.remove("_menu-opened"),O({duration:600,timing:P,draw:function(f){window.scrollTo(0,u-(u-l)*f)}})})})}function z(){let o=document.querySelector(".scroll-top");window.addEventListener("scroll",function(){let r=o.classList.contains("_active"),s=scrollY>35;s&&!r?o.classList.add("_active"):!s&&r&&o.classList.remove("_active")}),o.addEventListener("click",()=>{let r=window.scrollY;O({duration:600,timing:P,draw:function(s){window.scrollTo(0,r-r*s)}})}),scrollY>35&&!o.classList.contains("_active")&&o.classList.add("_active")}function O({timing:o,draw:r,duration:s}){let d=performance.now();requestAnimationFrame(function c(u){let l=(u-d)/s;l<0&&(l=0),l>1&&(l=1);let y=o(l);r(y),l<1&&requestAnimationFrame(c)})}function P(o){return Math.pow(o,1/5)}function I(){let o=document.querySelectorAll("[data-lazyload]");if(!o.length)return;if("IntersectionObserver"in window){let s={rootMargin:"50px",threshold:[0,.5]};return o.forEach(d=>{new IntersectionObserver(u,s).observe(d);function u(l,y){l.forEach(f=>{f.isIntersecting&&(r(f.target),y.disconnect())})}}),!0}else return o.forEach(s=>r(s)),!0;function r(s){s.hasAttribute("data-src")&&(s.setAttribute("src",s.getAttribute("data-src")),s.removeAttribute("data-src"))}}function B(){let o=document.querySelectorAll("[data-gallery]");if(!o.length)return;let r=document.createElement("div"),s=document.createElement("button"),d="my-gallery_active";r.className="my-gallery",s.type="button",s.className="my-gallery__close",s.innerHTML="<span class='sr-only'>\u0417\u0430\u043A\u0440\u044B\u0442\u044C</span>",document.body.appendChild(r),r.appendChild(s);let c=new Image;this.show=()=>r.classList.add(d),this.hide=()=>r.classList.remove(d),s.addEventListener("click",()=>{w.hide(),this.hide()}),r.addEventListener("click",()=>{w.hide(),this.hide()}),o.forEach(u=>{let l=u.querySelector("img");if(!l)return;let f=(l.getAttribute("data-src")||l.getAttribute("src")||"images/placeholder.svg").replace("/thumbnails","");u.addEventListener("click",h=>{this.showGalleryElement(h,f)}),u.addEventListener("keydown",h=>{(h.key===" "||h.key==="Enter"||h.key==="Spacebar")&&this.showGalleryElement(h,f)})}),this.showGalleryElement=(u,l)=>{u.preventDefault(),w.show(),c.onload=()=>r.appendChild(c),c.src=l,c.alt=u.target.alt,this.show()}}function H(){let o="popup-overlay";this.element=document.querySelector(`.${o}`);let r=`${o}_active`,s=document.body,d=document.querySelector("header");this.show=()=>{let c=window.innerWidth-document.body.clientWidth;this.element.classList.add(r),s.style=`overflow: hidden; margin-right: ${c}px`,d.style=`padding-right: ${c}px`},this.hide=()=>{this.element.classList.remove(r),setTimeout(()=>{s.style="",d.style=""},300)}}document.addEventListener("DOMContentLoaded",function(){T(".header",35,"_scrolled"),F(".burger",".header","_menu-opened"),I(),z(),$,x;let o=w,r=document.querySelector(".thank-you-popup"),s=document.querySelector(".top-up-popup"),d=document.querySelectorAll(".popup__close"),c="popup_active",u=document.querySelectorAll("form.form"),l=document.querySelectorAll(".form__input"),y="form__error-message",f=`${y}_active`,h="error",L="valid",v={emptyName:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F",emptyPhone:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",emptyWebsite:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",emptyEmail:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",wrongPhone:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",wrongWebsite:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",wrongEmail:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email"},q=document.querySelector("button[name=top-up-account]"),E=document.querySelectorAll(".faq-item");E.length&&E.forEach(t=>{let i=t.querySelector(".faq-item__button"),a=t.querySelector(".faq-item__answer-wrapper");i.addEventListener("click",()=>{k(i,a)}),i.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter"||e.key==="Spacebar")&&(e.preventDefault(),k(i,a))})}),d.forEach(t=>{t.addEventListener("click",()=>{o.hide(),r.classList.remove(c),s.classList.remove(c)})}),o.element.addEventListener("click",()=>{o.hide(),r.classList.remove(c),s.classList.remove(c)}),l&&l.forEach(t=>{let i=t.previousElementSibling||t.nextElementSibling;!i.classList.contains("form__label_placeholder")||(S(t.value,i),t.addEventListener("focusin",a=>S(t.value,i,a.type)),t.addEventListener("focusout",a=>S(t.value,i,a.type)))});let W=t=>t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),M=t=>t.match(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w\-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/);u&&u.forEach(t=>{D(t)}),q&&q.addEventListener("click",()=>{o.show(),s.classList.add(c)});function D(t){let i=t.querySelectorAll("[data-required]"),a=t.name,e=t.querySelector(`#${a}-phone`);e&&N(e),t.addEventListener("submit",m=>{m.preventDefault();let n=0;if(i.forEach(p=>{let g=[p.previousElementSibling,p.nextElementSibling],A=[p,g,L,h],G=[p,g,h,L];if(!p.value){b(A,"empty");return}switch(p.id){case`${a}-email`:if(!W(p.value)){b(A,"wrong");break}case`${a}-website`:if(!M(p.value)){b(A,"wrong");break}default:b(G);break}}),n=document.querySelectorAll(`[data-required]${h}`).length,n)return;o.show(),r.classList.add(c);let _=new FormData(t),C=[];console.info("%c\u0414\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B","color: chartreuse; font-size: 160%");for(let[p,g]of _)C.push([p,g]),console.log(`\u042D\u043B\u0435\u043C\u0435\u043D\u0442: "${p}"; \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: %c"${g}"%c.`,"color: burlywood; font-style: italic; font-size: 120%");console.info("\u041C\u0430\u0441\u0441\u0438\u0432: ",C),i.forEach(p=>{p.classList.remove(L)}),t.reset()})}function S(t,i,a="init"){if(!t&&a=="init"||!!t&&a=="focusout")return;let e="form__label_placeholder_active";switch(a){case"init":case"focusin":i.classList.add(e);break;case"focusout":i.classList.remove(e);break}}function k(t,i){if(!t&&!i)return;let a=t.parentElement;a.classList.contains("_active")?E.forEach(e=>{e.classList.remove("_active","_not-active"),e.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}):(E.forEach(e=>{e.classList.add("_not-active"),e.classList.remove("_active"),e.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}),a.classList.add("_active"),a.classList.remove("_not-active"),i.style.height=`${i.firstElementChild.offsetHeight}px`)}function b(t,i=""){let a=t[0],e=t[1],m=t[2],n=t[3];a.classList.contains(m)&&a.classList.remove(m),a.classList.contains(n)||a.classList.add(n),e.forEach(_=>{Y(_,a,i)})}function Y(t,i,a){if(t.classList.contains(f)&&i.classList.contains(L)&&!a){t.classList.remove(f),t.textContent="";return}let e=t.classList.contains(y),m=i.name.split("-")[1];if(e&&a=="empty"){switch(t.classList.add(f),m){case"name":t.textContent=v.emptyName;break;case"email":t.textContent=v.emptyEmail;break;case"website":t.textContent=v.emptyWebsite;break;case"phone":t.textContent=v.emptyPhone;break}return}if(e&&a=="wrong"){switch(t.classList.add(f),i.id){case"email":t.textContent=v.wrongEmail;break;case"website":t.textContent=v.wrongWebsite;break;case"phone":t.textContent=v.wrongPhone;break}return}}function N(t){t.addEventListener("input",i=>{let e=i.target.value.replace(/((?!\+)\D+)+/g,"").match(/^(\+\d{0,3})(\d{0,2})(\d{0,3})(\d{0,2})(\d{0,2})/),m="",n=1;e===null||!e[n]?m="":e[n]&&!e[n+1]?m=`${e[n]}`:e[n]&&e[n+1]&&!e[n+2]?m=`${e[n]} (${e[n+1]}`:e[n]&&e[n+1]&&e[n+2]&&!e[n+3]?m=`${e[n]} (${e[n+1]}) ${e[n+2]}`:e[n]&&e[n+1]&&e[n+2]&&e[n+3]&&!e[n+4]?m=`${e[n]} (${e[n+1]}) ${e[n+2]}-${e[n+3]}`:m=`${e[n]} (${e[n+1]}) ${e[n+2]}-${e[n+3]}-${e[n+4]}`,i.target.value=m})}});})();
