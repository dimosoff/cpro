(()=>{var w=new j,x=new H,F=new B;function T(o,r,s){document.querySelector(o).addEventListener("click",()=>{document.querySelectorAll(r).forEach(d=>{d.classList.toggle(s)})})}function z(o,r,s){window.addEventListener("scroll",function(){scrollY>r?document.querySelector(o).classList.add(s):document.querySelector(o).classList.remove(s)}),scrollY>r&&document.querySelector(o).classList.add(s)}function B(){document.querySelectorAll("a[href^='#']").forEach(r=>{r.addEventListener("click",s=>{s.preventDefault();let d=s.target.getAttribute("href")||s.target.parentElement.getAttribute("href")||s.target.firstElementChild.getAttribute("href");if(d==="#")return;let c=document.getElementById(d.substring(1));if(!c)return;let u=window.scrollY,l=c.offsetTop-50,y=document.querySelector("._menu-opened");y&&y.classList.remove("_menu-opened"),P({duration:600,timing:I,draw:function(f){window.scrollTo(0,u-(u-l)*f)}})})})}function O(){let o=document.querySelector(".scroll-top");window.addEventListener("scroll",function(){let r=o.classList.contains("_active"),s=scrollY>35;s&&!r?o.classList.add("_active"):!s&&r&&o.classList.remove("_active")}),o.addEventListener("click",()=>{let r=window.scrollY;P({duration:600,timing:I,draw:function(s){window.scrollTo(0,r-r*s)}})}),scrollY>35&&!o.classList.contains("_active")&&o.classList.add("_active")}function P({timing:o,draw:r,duration:s}){let d=performance.now();requestAnimationFrame(function c(u){let l=(u-d)/s;l<0&&(l=0),l>1&&(l=1);let y=o(l);r(y),l<1&&requestAnimationFrame(c)})}function I(o){return Math.pow(o,1/5)}function W(){let o=document.querySelectorAll("[data-lazyload]");if(!o.length)return;if("IntersectionObserver"in window){let s={rootMargin:"50px",threshold:[0,.5]};return o.forEach(d=>{new IntersectionObserver(u,s).observe(d);function u(l,y){l.forEach(f=>{f.isIntersecting&&(r(f.target),y.disconnect())})}}),!0}else return o.forEach(s=>r(s)),!0;function r(s){s.hasAttribute("data-src")&&(s.setAttribute("src",s.getAttribute("data-src")),s.removeAttribute("data-src"))}}function H(){let o=document.querySelectorAll("[data-gallery]");if(!o.length)return;let r=document.createElement("div"),s=document.createElement("button"),d="my-gallery_active";r.className="my-gallery",s.type="button",s.className="my-gallery__close",s.innerHTML="<span class='sr-only'>\u0417\u0430\u043A\u0440\u044B\u0442\u044C</span>",document.body.appendChild(r),r.appendChild(s);let c=new Image;this.show=()=>r.classList.add(d),this.hide=()=>r.classList.remove(d),s.addEventListener("click",()=>{w.hide(),this.hide()}),r.addEventListener("click",()=>{w.hide(),this.hide()}),o.forEach(u=>{let l=u.querySelector("img");if(!l)return;let f=(l.getAttribute("data-src")||l.getAttribute("src")||"images/placeholder.svg").replace("/thumbnails","");u.addEventListener("click",h=>{this.showGalleryElement(h,f)}),u.addEventListener("keydown",h=>{(h.key===" "||h.key==="Enter"||h.key==="Spacebar")&&this.showGalleryElement(h,f)})}),this.showGalleryElement=(u,l)=>{u.preventDefault(),w.show(),c.onload=()=>r.appendChild(c),c.src=l,c.alt=u.target.alt,this.show()}}function j(){let o="popup-overlay";this.element=document.querySelector(`.${o}`);let r=`${o}_active`,s=document.body,d=document.querySelector("header");this.show=()=>{let c=window.innerWidth-document.body.clientWidth;this.element.classList.add(r),s.style=`overflow: hidden; margin-right: ${c}px`,d.style=`padding-right: ${c}px`},this.hide=()=>{this.element.classList.remove(r),setTimeout(()=>{s.style="",d.style=""},300)}}document.addEventListener("DOMContentLoaded",function(){z(".header",35,"_scrolled"),T(".burger",".header","_menu-opened"),W(),O(),x,F;let o=w,r=document.querySelector(".thank-you-popup"),s=document.querySelector(".top-up-popup"),d=document.querySelectorAll(".popup__close"),c="popup_active",u=document.querySelectorAll("form.form"),l=document.querySelectorAll(".form__input"),y="form__error-message",f=`${y}_active`,h="form__input",q=`${h}_error`,L=`${h}_valid`,v={emptyName:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F",emptyPhone:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",emptyWebsite:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",emptyEmail:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",wrongPhone:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",wrongWebsite:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",wrongEmail:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email"},k=document.querySelector("button[name=top-up-account]"),E=document.querySelectorAll(".faq-item");E.length&&E.forEach(t=>{let a=t.querySelector(".faq-item__button"),i=t.querySelector(".faq-item__answer-wrapper");a.addEventListener("click",()=>{C(a,i)}),a.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter"||e.key==="Spacebar")&&(e.preventDefault(),C(a,i))})}),d.forEach(t=>{t.addEventListener("click",()=>{o.hide(),r.classList.remove(c),s.classList.remove(c)})}),o.element.addEventListener("click",()=>{o.hide(),r.classList.remove(c),s.classList.remove(c)}),l&&l.forEach(t=>{let a=t.previousElementSibling||t.nextElementSibling;!a.classList.contains("form__label_placeholder")||(_(t.value,a),t.addEventListener("focusin",i=>_(t.value,a,i.type)),t.addEventListener("focusout",i=>_(t.value,a,i.type)))});let M=t=>t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),D=t=>t.match(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w\-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/);u&&u.forEach(t=>{Y(t)}),k&&k.addEventListener("click",()=>{o.show(),s.classList.add(c)});function Y(t){let a=t.querySelectorAll("[data-required]"),i=t.name,e=t.querySelector(`#${i}-phone`);e&&G(e),t.addEventListener("submit",m=>{m.preventDefault();let n=0;if(a.forEach(p=>{let g=[p.previousElementSibling,p.nextElementSibling],A=[p,g,L,q],Z=[p,g,q,L];if(!p.value){b(A,"empty");return}switch(p.id){case`${i}-email`:if(!M(p.value)){b(A,"wrong");break}case`${i}-website`:if(!D(p.value)){b(A,"wrong");break}default:b(Z);break}}),n=document.querySelectorAll("[data-required].form__input_error").length,n)return;o.show(),r.classList.add(c);let S=new FormData(t),$=[];console.info("%c\u0414\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B","color: chartreuse; font-size: 160%");for(let[p,g]of S)$.push([p,g]),console.log(`\u042D\u043B\u0435\u043C\u0435\u043D\u0442: "${p}"; \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: %c"${g}"%c.`,"color: burlywood; font-style: italic; font-size: 120%");console.info("\u041C\u0430\u0441\u0441\u0438\u0432: ",$),a.forEach(p=>{p.classList.remove(L)}),t.reset()})}function _(t,a,i="init"){if(!t&&i=="init"||!!t&&i=="focusout")return;let e="form__label_placeholder_active";switch(i){case"init":case"focusin":a.classList.add(e);break;case"focusout":a.classList.remove(e);break}}function C(t,a){if(!t&&!a)return;let i=t.parentElement;i.classList.contains("_active")?E.forEach(e=>{e.classList.remove("_active","_not-active"),e.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}):(console.log("active"),E.forEach(e=>{e.classList.add("_not-active"),e.classList.remove("_active"),e.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}),i.classList.add("_active"),i.classList.remove("_not-active"),a.style.height=`${a.firstElementChild.offsetHeight}px`)}function b(t,a=""){let i=t[0],e=t[1],m=t[2],n=t[3];i.classList.contains(m)&&i.classList.remove(m),i.classList.contains(n)||i.classList.add(n),e.forEach(S=>{N(S,i,a)})}function N(t,a,i){if(t.classList.contains(f)&&a.classList.contains(L)&&!i){t.classList.remove(f),t.textContent="";return}let e=t.classList.contains(y),m=a.name.split("-")[1];if(e&&i=="empty"){switch(t.classList.add(f),m){case"name":t.textContent=v.emptyName;break;case"email":t.textContent=v.emptyEmail;break;case"website":t.textContent=v.emptyWebsite;break;case"phone":t.textContent=v.emptyPhone;break}return}if(e&&i=="wrong"){switch(t.classList.add(f),a.id){case"email":t.textContent=v.wrongEmail;break;case"website":t.textContent=v.wrongWebsite;break;case"phone":t.textContent=v.wrongPhone;break}return}}function G(t){t.addEventListener("input",a=>{let e=a.target.value.replace(/((?!\+)\D+)+/g,"").match(/^(\+\d{0,3})(\d{0,2})(\d{0,3})(\d{0,2})(\d{0,2})/),m="",n=1;e===null||!e[n]?m="":e[n]&&!e[n+1]?m=`${e[n]}`:e[n]&&e[n+1]&&!e[n+2]?m=`${e[n]} (${e[n+1]}`:e[n]&&e[n+1]&&e[n+2]&&!e[n+3]?m=`${e[n]} (${e[n+1]}) ${e[n+2]}`:e[n]&&e[n+1]&&e[n+2]&&e[n+3]&&!e[n+4]?m=`${e[n]} (${e[n+1]}) ${e[n+2]}-${e[n+3]}`:m=`${e[n]} (${e[n+1]}) ${e[n+2]}-${e[n+3]}-${e[n+4]}`,a.target.value=m})}});})();
