(()=>{var v=new Y,b=new M,q=new z;function A(r,o,n){document.querySelector(r).addEventListener("click",()=>{document.querySelectorAll(o).forEach(c=>{c.classList.toggle(n)})})}function C(r,o,n){window.addEventListener("scroll",function(){scrollY>o?document.querySelector(r).classList.add(n):document.querySelector(r).classList.remove(n)}),scrollY>o&&document.querySelector(r).classList.add(n)}function z(){document.querySelectorAll("a[href^='#']").forEach(o=>{o.addEventListener("click",n=>{n.preventDefault();let c=n.target.getAttribute("href")||n.target.parentElement.getAttribute("href")||n.target.firstElementChild.getAttribute("href");if(c==="#")return;let d=document.getElementById(c.substring(1));if(!d)return;let u=window.scrollY,l=d.offsetTop-50,m=document.querySelector("._menu-opened");m&&m.classList.remove("_menu-opened"),k({duration:600,timing:x,draw:function(f){window.scrollTo(0,u-(u-l)*f)}})})})}function $(){let r=document.querySelector(".scroll-top");window.addEventListener("scroll",function(){let o=r.classList.contains("_active"),n=scrollY>35;n&&!o?r.classList.add("_active"):!n&&o&&r.classList.remove("_active")}),r.addEventListener("click",()=>{let o=window.scrollY;k({duration:600,timing:x,draw:function(n){window.scrollTo(0,o-o*n)}})}),scrollY>35&&!r.classList.contains("_active")&&r.classList.add("_active")}function k({timing:r,draw:o,duration:n}){let c=performance.now();requestAnimationFrame(function d(u){let l=(u-c)/n;l<0&&(l=0),l>1&&(l=1);let m=r(l);o(m),l<1&&requestAnimationFrame(d)})}function x(r){return Math.pow(r,1/5)}function F(){let r=document.querySelectorAll("[data-lazyload]");if(!r.length)return;if("IntersectionObserver"in window){let n={rootMargin:"50px",threshold:[0,.5]};return r.forEach(c=>{new IntersectionObserver(u,n).observe(c);function u(l,m){l.forEach(f=>{f.isIntersecting&&(o(f.target),m.disconnect())})}}),!0}else return r.forEach(n=>o(n)),!0;function o(n){n.hasAttribute("data-src")&&(n.setAttribute("src",n.getAttribute("data-src")),n.removeAttribute("data-src"))}}function M(){let r=document.querySelectorAll("[data-gallery]");if(!r.length)return;let o=document.createElement("div"),n=document.createElement("button"),c="my-gallery_active";o.className="my-gallery",n.type="button",n.className="my-gallery__close",n.innerHTML="<span class='sr-only'>\u0417\u0430\u043A\u0440\u044B\u0442\u044C</span>",document.body.appendChild(o),o.appendChild(n);let d=new Image;this.show=()=>o.classList.add(c),this.hide=()=>o.classList.remove(c),n.addEventListener("click",()=>{v.hide(),this.hide()}),o.addEventListener("click",()=>{v.hide(),this.hide()}),r.forEach(u=>{let l=u.querySelector("img"),m=l.getAttribute("data-src")||l.getAttribute("src")||"images/placeholder.svg";console.log(l);let f=m.replace("/thumbnails","");u.addEventListener("click",h=>{h.preventDefault(),v.show(),d.onload=()=>o.appendChild(d),d.src=f,d.alt=h.target.alt,this.show()})})}function Y(){let r="popup-overlay";this.element=document.querySelector(`.${r}`);let o=`${r}_active`,n=document.body,c=document.querySelector("header");this.show=()=>{let d=window.innerWidth-document.body.clientWidth;this.element.classList.add(o),n.style=`overflow: hidden; margin-right: ${d}px`,c.style=`padding-right: ${d}px`},this.hide=()=>{this.element.classList.remove(o),setTimeout(()=>{n.style="",c.style=""},300)}}document.addEventListener("DOMContentLoaded",function(){C(".header",35,"_scrolled"),A(".burger",".header","_menu-opened"),F(),$(),b,q;let r=v,o=document.querySelector(".thank-you-popup"),n=document.querySelector("button[name='thank-you-close']"),c=document.querySelector("form[name='conatcts-form']"),d=document.querySelectorAll(".form__input"),u=document.querySelectorAll("[data-required]"),l=`${o.className}_active`,m="form__error-message",f=`${m}_active`,h="form__input",S=`${h}_error`,g=`${h}_valid`,y={emptyName:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F",emptyPhone:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",emptyEmail:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",wrongPhone:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",wrongEmail:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email"},w=document.querySelectorAll(".faq-item");w.forEach(s=>{let i=s.querySelector(".faq-item__button"),e=s.querySelector(".faq-item__answer-wrapper");i.addEventListener("click",()=>{T(i,e)})});function T(s,i){if(s.length&&i.length)return;let e=s.parentElement;e.classList.contains("_active")?w.forEach(a=>{a.classList.remove("_active","_not-active"),a.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}):(w.forEach(a=>{a.classList.add("_not-active"),a.classList.remove("_active"),a.querySelector(".faq-item__answer-wrapper").removeAttribute("style")}),e.classList.add("_active"),e.classList.remove("_not-active"),i.style.height=`${i.firstElementChild.offsetHeight}px`)}n.addEventListener("click",()=>{r.hide(),o.classList.remove(l)}),r.element.addEventListener("click",()=>{r.hide(),o.classList.remove(l)}),d.length&&d.forEach(s=>{let i=s.previousElementSibling||s.nextElementSibling;E(s.value,i),s.addEventListener("focusin",e=>E(s.value,i,e.type)),s.addEventListener("focusout",e=>E(s.value,i,e.type))});function E(s,i,e="init"){if(!s&&e=="init"||!!s&&e=="focusout")return;let a="form__label_placeholder_active";switch(e){case"init":case"focusin":i.classList.add(a);break;case"focusout":i.classList.remove(a);break}}let O=s=>s.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);c.length&&c.addEventListener("submit",s=>{if(s.preventDefault(),u.forEach(t=>{let p=[t.previousElementSibling,t.nextElementSibling],L=[t,p,g,S],P=[t,p,S,g];if(!t.value){_(L,"empty");return}switch(t.id){case"f-email":if(!O(t.value)){_(L,"wrong");break}default:_(P);break}}),document.querySelectorAll("[data-required].form__input_error").length)return;r.show(),o.classList.add(l);let e=new FormData(c),a=[];console.info("%c\u0414\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B","color: chartreuse; font-size: 160%");for(let[t,p]of e)a.push([t,p]),console.log(`\u042D\u043B\u0435\u043C\u0435\u043D\u0442: "${t}"; \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: %c"${p}"%c.`,"color: burlywood; font-style: italic; font-size: 120%");console.info("\u041C\u0430\u0441\u0441\u0438\u0432: ",a),u.forEach(t=>{t.classList.remove(g)}),c.reset()}),c.querySelector("#f-phone").addEventListener("input",s=>{let e=s.target.value.replace(/((?!\+)\D+)+/g,"").match(/^(\+\d{0,3})(\d{0,2})(\d{0,3})(\d{0,2})(\d{0,2})/),a="",t=1;e===null||!e[t]?a="":e[t]&&!e[t+1]?a=`${e[t]}`:e[t]&&e[t+1]&&!e[t+2]?a=`${e[t]} (${e[t+1]}`:e[t]&&e[t+1]&&e[t+2]&&!e[t+3]?a=`${e[t]} (${e[t+1]}) ${e[t+2]}`:e[t]&&e[t+1]&&e[t+2]&&e[t+3]&&!e[t+4]?a=`${e[t]} (${e[t+1]}) ${e[t+2]}-${e[t+3]}`:a=`${e[t]} (${e[t+1]}) ${e[t+2]}-${e[t+3]}-${e[t+4]}`,s.target.value=a});function _(s,i=""){let e=s[0],a=s[1],t=s[2],p=s[3];e.classList.contains(t)&&e.classList.remove(t),e.classList.contains(p)||e.classList.add(p),a.forEach(L=>{I(L,e,i)})}function I(s,i,e){if(s.classList.contains(f)&&i.classList.contains(g)&&!e){s.classList.remove(f),s.textContent="";return}let a=s.classList.contains(m);if(a&&e=="empty"){switch(s.classList.add(f),i.id){case"f-name":s.textContent=y.emptyName;break;case"f-email":s.textContent=y.emptyEmail;break;case"f-phone":s.textContent=y.emptyPhone;break}return}if(a&&e=="wrong"){switch(s.classList.add(f),i.id){case"f-email":s.textContent=y.wrongEmail;break;case"f-phone":s.textContent=y.wrongPhone;break}return}}});})();
